<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Datos de Envío - Avada Kedavra</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/estilo.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="aparicion-hogwarts">

  <div class="container">
    <div class="carrito-marco">
      <h2 class="mb-4">📦 Datos de Envío</h2>

      <form id="formEnvio">
        <div class="mb-3">
          <label for="nombre" class="form-label">Nombre completo</label>
          <input type="text" class="form-control" id="nombre" required>
        </div>

        <div class="mb-3">
          <label for="direccion" class="form-label">Dirección</label>
          <input type="text" class="form-control" id="direccion" required>
        </div>

        <div class="mb-3">
          <label for="ciudad" class="form-label">Ciudad</label>
          <input type="text" class="form-control" id="ciudad" required>
        </div>

        <div class="mb-3">
          <label for="codigoPostal" class="form-label">Código Postal</label>
          <input type="text" class="form-control" id="codigoPostal" required>
        </div>
        
        <div class="mb-3">
          <label for="telefono" class="form-label">Número de teléfono</label>
          <input type="tel" class="form-control" id="telefono" required>
        </div>


        <div class="mb-3">
          <label for="email" class="form-label">Correo electrónico</label>
          <input type="email" class="form-control" id="email" required>
        </div>

        <div class="text-end mt-4">
          <button id="confirmarEnvio" class="btn btn-success">Confirmar Envío</button>
        </div>
      </form>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const campos = ["nombre", "direccion", "ciudad", "codigoPostal", "email", "telefono"];

      const btn = document.getElementById("confirmarEnvio");

      // Restaurar datos si existen
      campos.forEach(id => {
        const campo = document.getElementById(id);
        const guardado = localStorage.getItem("envio_" + id);
        if (guardado) campo.value = guardado;
      });

      // Guardar en tiempo real
      campos.forEach(id => {
        const campo = document.getElementById(id);
        campo.addEventListener("input", () => {
          localStorage.setItem("envio_" + id, campo.value);
        });
      });

      // Validación y avance
      btn.addEventListener("click", (e) => {
        e.preventDefault();

        let valido = true;
        campos.forEach(id => {
          const campo = document.getElementById(id);
          if (!campo.value.trim()) {
            campo.classList.add("is-invalid");
            valido = false;
          } else {
            campo.classList.remove("is-invalid");
          }
        });

        if (!valido) return;

        btn.classList.add("animado");
        setTimeout(() => btn.classList.remove("animado"), 600);

        alert("¡Datos confirmados! Avanzando al pago...");
        window.location.href = "pago.html";
      });
    });
  </script>
</body>
</html>
