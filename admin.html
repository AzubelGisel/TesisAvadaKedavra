<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Panel del Ministerio de Magia</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #1a1a1a;
      color: #f5f5f5;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #2c2c2c;
      padding: 1rem;
      text-align: center;
      border-bottom: 2px solid #ffd700;
    }
    nav button {
      margin: 0.5rem;
      padding: 0.5rem 1rem;
      background-color: #444;
      color: #ffd700;
      border: none;
      cursor: pointer;
      border-radius: 5px;
    }
    nav button:hover {
      background-color: #666;
    }
    .admin-section {
      padding: 2rem;
    }
    .hidden {
      display: none;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 1rem;
    }
    th, td {
      border: 1px solid #555;
      padding: 0.5rem;
      text-align: center;
    }
    form input, form textarea, form button {
      margin: 0.5rem;
      padding: 0.5rem;
      border-radius: 5px;
      border: none;
    }
    form button {
      background-color: #ffd700;
      color: #1a1a1a;
      cursor: pointer;
    }

    #login-screen {
  text-align: center;
  padding: 3rem;
}

#login-form input {
  display: block;
  margin: 1rem auto;
  padding: 0.5rem;
  width: 200px;
  border-radius: 5px;
  border: none;
}

#login-form button {
  background-color: #ffd700;
  color: #1a1a1a;
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}

  </style>
</head>
<body>

  <div id="login-screen">
  <h2>🔐 Acceso al Ministerio de Magia</h2>
  <form id="login-form">
    <input type="text" placeholder="Usuario" required />
    <input type="password" placeholder="Contraseña" required />
    <button type="submit">Entrar</button>
  </form>
  <p id="login-error" style="color: red;"></p>
</div>

<p id="contador-visitas" class="text-center mt-3"></p>


<div id="admin-panel" class="hidden">
  <header>
    <h1>🪄 Panel del Ministerio de Magia</h1>
    <nav>
      <button data-section="stock">📦 Stock</button>
      <button data-section="promos">🎁 Promos</button>
      <button data-section="banner">📰 Banner</button>
    </nav>
  </header>

  <main>
    <!-- Stock -->
    <section id="stock" class="admin-section">
      <h2>📦 Gestión de Stock</h2>
      <table>
  <thead>
    <tr>
      <th>ID</th><th>Casa</th><th>Nombre</th><th>Descripción</th><th>Precio</th><th>Acciones</th>
    </tr>
  </thead>
  <tbody id="stock-table"></tbody>
</table>

      <h3>➕ Agregar nuevo producto</h3>
      <form id="add-product-form">
  <input type="text" placeholder="Nombre" required />
  <input type="text" placeholder="Casa" required />
  <input type="text" placeholder="Descripción" required />
  <input type="number" placeholder="Precio" required />
  <button type="submit">Agregar</button>
</form>

    </section>

    <!-- Promos -->
    <section id="promos" class="admin-section hidden">
      <h2>🎁 Promociones</h2>
      <form id="promo-form">
        <input type="text" placeholder="Título de la promo" required />
        <textarea placeholder="Descripción" required></textarea>
        <input type="date" required />
        <input type="date" required />
        <button type="submit">Guardar Promo</button>
      </form>
    </section>

    <!-- Banner -->
    <section id="banner" class="admin-section hidden">
      <h2>📰 Banner de Novedades</h2>
      <textarea id="banner-text" rows="4" placeholder="Texto del banner..."></textarea>
      <button onclick="guardarBanner()">Guardar Banner</button>
      <p><strong>Preview:</strong> <span id="banner-preview"></span></p>
    </section>



  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // Navegación
    const buttons = document.querySelectorAll("nav button");
    const sections = document.querySelectorAll(".admin-section");
    buttons.forEach(btn => {
      btn.addEventListener("click", () => {
        const target = btn.getAttribute("data-section");
        sections.forEach(sec => sec.classList.add("hidden"));
        document.getElementById(target).classList.remove("hidden");
      });
    });

    // Stock
    const stockTable = document.getElementById("stock-table");
    const addForm = document.getElementById("add-product-form");
    let productos = JSON.parse(localStorage.getItem("productos")) || [];

function renderStock() {
  const stockTable = document.getElementById("stock-table");
  stockTable.innerHTML = "";
  productos.forEach((prod, index) => {
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${index + 1}</td>
      <td>${prod.casa}</td>
      <td>${prod.nombre}</td>
      <td>${prod.descripcion}</td>
      <td>$${prod.precio}</td>
      <td>
        <button onclick="editarProducto(${index})">✏️</button>
        <button onclick="eliminarProducto(${index})">🗑️</button>
      </td>
    `;
    stockTable.appendChild(row);
  });
}

function eliminarProducto(index) {
  productos.splice(index, 1);
  localStorage.setItem("productos", JSON.stringify(productos));
  renderStock();
}

function editarProducto(index) {
  const prod = productos[index];
  const nuevoNombre = prompt("Nuevo nombre:", prod.nombre);
  const nuevaDescripcion = prompt("Nueva descripción:", prod.descripcion);
  const nuevoPrecio = prompt("Nuevo precio:", prod.precio);

  if (nuevoNombre && nuevaDescripcion && nuevoPrecio) {
    productos[index].nombre = nuevoNombre;
    productos[index].descripcion = nuevaDescripcion;
    productos[index].precio = parseFloat(nuevoPrecio);
    localStorage.setItem("productos", JSON.stringify(productos));
    renderStock();
  }
}

document.getElementById("add-product-form").addEventListener("submit", e => {
  e.preventDefault();
  const inputs = e.target.querySelectorAll("input");
  const nuevo = {
    nombre: inputs[0].value,
    casa: inputs[1].value,
    descripcion: inputs[2].value,
    precio: parseFloat(inputs[3].value)
  };
  productos.push(nuevo);
  localStorage.setItem("productos", JSON.stringify(productos));
  renderStock();
  e.target.reset();
});

renderStock();


    // Banner
    function guardarBanner() {
      const texto = document.getElementById("banner-text").value;
      localStorage.setItem("banner", texto);
      document.getElementById("banner-preview").textContent = texto;
    }

    document.getElementById("banner-text").value = localStorage.getItem("banner") || "";
    document.getElementById("banner-preview").textContent = localStorage.getItem("banner") || "";

    // Estadísticas
    const ctx = document.getElementById("ventasChart").getContext("2d");
    const ventasData = {
      labels: ["Bufanda", "Varita", "Túnica", "Pin"],
      datasets: [{
        label: "Ventas",
        data: [12, 8, 15, 5],
        backgroundColor: ["#4caf50", "#2196f3", "#ff9800", "#9c27b0"]
      }]
    };

    new Chart(ctx, {
      type: "bar",
      data: ventasData,
      options: {
        responsive: true,
        plugins: {
          legend: { display: false },
          title: { display: true, text: "Ventas por Producto" }
        }
      }
    });
  </script>

  <script>
const loginForm = document.getElementById("login-form");
const loginScreen = document.getElementById("login-screen");
const adminPanel = document.getElementById("admin-panel");
const loginError = document.getElementById("login-error");

// Usuario y contraseña definidos
const USER = "admin";
const PASS = "alohomora5";

loginForm.addEventListener("submit", e => {
  e.preventDefault();
  const inputs = loginForm.querySelectorAll("input");
  const user = inputs[0].value;
  const pass = inputs[1].value;

  if (user === USER && pass === PASS) {
    loginScreen.style.display = "none";
    adminPanel.classList.remove("hidden");
  } else {
    loginError.textContent = "Credenciales incorrectas. Intenta de nuevo.";
  }
});


  </script>

<script>
  const visitas = localStorage.getItem("visitas") || 0;
document.getElementById("contador-visitas").textContent = `👁️ La tienda ha sido visitada ${visitas} veces.`;
</script>

</body>
</html>
